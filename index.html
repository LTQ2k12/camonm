<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mưa Chữ 3D</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
</head>
<body>
<script>
  // ===== Scene setup =====
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const loader = new THREE.FontLoader();
  const texts = [
    "PHẠM TUẤN HẢI ❤️ TAO VẪN LUÔN TIN TƯỞNG M",
    "GEMLOGIN TOOL ❤️ DÙ MỌI NGƯỜI NÓI GÌ M",
    "TUANHAII ❤️ T VẪN LUÔN HỢP TÁC VỚI M",
    "ĐỪNG ĐỂ AI NÓI GÌ MÀ LỤY NHA ❤️"
  ];

  let textMeshes = [];

  loader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json", function(font) {
    texts.forEach((t, i) => {
      for (let j = 0; j < 20; j++) { // tạo nhiều lần cho giống mưa
        const geometry = new THREE.TextGeometry(t, {
          font: font,
          size: 3,
          height: 0.5,
          curveSegments: 12,
        });
        const material = new THREE.MeshBasicMaterial({ color: 0xff66cc });
        const mesh = new THREE.Mesh(geometry, material);

        // Random vị trí ban đầu
        mesh.position.set(
          (Math.random() - 0.5) * 300, // ngang
          Math.random() * 200,         // cao
          (Math.random() - 0.5) * 200  // sâu
        );

        scene.add(mesh);
        textMeshes.push(mesh);
      }
    });
  });

  // ===== Star background =====
  const starGeometry = new THREE.BufferGeometry();
  const starCount = 500;
  const starVertices = [];
  for (let i = 0; i < starCount; i++) {
    starVertices.push(
      (Math.random() - 0.5) * 1000,
      (Math.random() - 0.5) * 1000,
      (Math.random() - 0.5) * 1000
    );
  }
  starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
  const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 1 });
  const stars = new THREE.Points(starGeometry, starMaterial);
  scene.add(stars);

  // ===== Camera =====
  camera.position.z = 150;

  // ===== Animate =====
  function animate() {
    requestAnimationFrame(animate);

    textMeshes.forEach(mesh => {
      mesh.position.y -= 0.2; // tốc độ rơi (giảm nhỏ thì rơi chậm hơn)
      if (mesh.position.y < -100) {
        mesh.position.y = 150; // reset lại trên cao
        mesh.position.x = (Math.random() - 0.5) * 300;
        mesh.position.z = (Math.random() - 0.5) * 200;
      }
    });

    renderer.render(scene, camera);
  }
  animate();

  // ===== Resize =====
  window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
